<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/add.css">
    <title>Document</title>
</head>
<body>
    <header>
        <div class="header">
            <a href="/">
                <h1>RUN<span>NER</span></h1>
            </a>
            <a class="add-btn" href="#">ADD <span>+</span></a>
        </div>
    </header>

    <main>
        <h2>EDIT PRODUCT</h2>
        <form id="form" data-doc="/edit/<%= shoe.id %>">
            <div class=field-container>
                <label for="title">Title</label>
                <input
                    type="text"
                    name="title"
                    id="title"
                    class="input"
                    value="<%= shoe.title %>"
                />
            </div>

            <div class=field-container>
                <label for="brand">Brand</label>
                <input
                type="text"
                name="brand"
                id="brand"
                class="input"
                value="<%= shoe.brand %>"
                />
            </div>

            <div class=field-container>
                <label for="price">Price</label>
                <input
                    type="text"
                    name="price"
                    id="price"
                    class="input"
                    value="<%= shoe.price %>"
                />
            </div>

            <div class=field-container>
                <label for="image">Image</label>
                <input
                    type="text"
                    name="image"
                    id="image"
                    class="input"
                    value="<%= shoe.image %>"
                />
            </div>
            <button type="submit">CONFIRM</button>
        </form>
    </main>

    <script>
        const form = document.getElementById('form')
  
        form.addEventListener("submit", (e) => {
            e.preventDefault();
            const endpoint = `${form.dataset.doc}`;
            let title = event.target[0].value;
            let brand = event.target[1].value;
            let price = event.target[2].value;
            let image = event.target[3].value;

            let dataObj = {
                title: title,
                brand: brand,
                price: price,
                image: image,
            }
  
            fetch(endpoint, {
                method: "PUT",
                headers:{
                    'Content-Type':'application/json'
                },
                body: JSON.stringify(dataObj)
            })
            .then((response) => (window.location.href = '/shoes'))
            .catch((err) => {
              console.log(err);
            });
        });
      </script>
</body>
</html>